<div class="container" *ngIf="currentUser">
  <h2 class="mb-4">{{ 'dashboard.dashboard' | translate }} - {{ userRole }}</h2>

  <div *ngIf="userRole === 'MEDECIN'" class="row g-4">
    <div class="col-md-4">
      <div class="card h-100">
        <div class="card-body">
          <h5 class="card-title">{{ 'dashboard.todayAppointments' | translate }}</h5>
          <p class="card-text">{{ 'doctor.description' | translate }}</p>
          <p class="card-text">{{ 'doctor.noAppointmentsToday' | translate }}</p>
          <a routerLink="/rendez-vous" class="btn btn-primary">{{ 'doctor.viewAllAppointments' | translate }}</a>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="userRole === 'PHARMACIEN'" class="row g-4">
    <div class="col-md-4">
      <div class="card h-100">
        <div class="card-body">
          <h5 class="card-title">{{ 'dashboard.pendingPrescriptions' | translate }}</h5>
          <p class="card-text">{{ 'pharmacist.description' | translate }}</p>
          <p class="card-text">{{ 'pharmacist.managePrescriptions' | translate }}</p>
          <a routerLink="/ordonnances" class="btn btn-primary">{{ 'pharmacist.viewAllPrescriptions' | translate }}</a>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="userRole === 'PATIENT'" class="row g-4">
    <div class="col-md-4">
      <div class="card h-100">
        <div class="card-body">
          <h5 class="card-title">{{ 'patient.prescriptions' | translate }}</h5>
          <p class="card-text">{{ 'patient.description' | translate }}</p>
          <p class="card-text">{{ 'patient.recentPrescriptions' | translate }}</p>
          <a routerLink="/mes-ordonnances" class="btn btn-primary">{{ 'patient.viewAllPrescriptions' | translate }}</a>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container my-5">
  <div class="row">
    <div class="col-md-10 mx-auto">
      <h2 class="text-center mb-4 text-sky-blue">{{ 'about.title' | translate }}</h2>
      <p class="lead text-center mb-4">{{ 'about.description' | translate }}</p>
      <div class="row g-4 mt-4">
        <div class="col-md-4 mb-4">
          <div class="card h-100 border-0 shadow-lg hover-card">
            <div class="card-body text-center p-4">
              <div class="icon-circle bg-primary mb-4">
                <i class="fas fa-user-md fa-2x text-white"></i>
              </div>
              <h5 class="card-title fw-bold">{{ 'about.forDoctors' | translate }}</h5>
              <p class="card-text mb-4">{{ 'about.doctorsDescription' | translate }}</p>              <ul class="list-unstyled text-start">
                <li><i class="bi bi-check-circle-fill text-primary me-2"></i>{{ 'about.doctorFeatures.patientManagement' | translate }}</li>
                <li><i class="bi bi-check-circle-fill text-primary me-2"></i>{{ 'about.doctorFeatures.ePrescription' | translate }}</li>
                <li><i class="bi bi-check-circle-fill text-primary me-2"></i>{{ 'about.doctorFeatures.profileManagement' | translate }}</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="col-md-4 mb-4">
          <div class="card h-100 border-0 shadow-lg hover-card">
            <div class="card-body text-center p-4">
              <div class="icon-circle bg-success mb-4">
                <i class="fas fa-pills fa-2x text-white"></i>
              </div>
              <h5 class="card-title fw-bold">{{ 'about.forPharmacists' | translate }}</h5>
              <p class="card-text mb-4">{{ 'about.pharmacistsDescription' | translate }}</p>              <ul class="list-unstyled text-start">
                <li><i class="bi bi-check-circle-fill text-success me-2"></i>{{ 'about.pharmacistFeatures.prescriptionManagement' | translate }}</li>
                <li><i class="bi bi-check-circle-fill text-success me-2"></i>{{ 'about.pharmacistFeatures.medicationTracking' | translate }}</li>
                <li><i class="bi bi-check-circle-fill text-success me-2"></i>{{ 'about.pharmacistFeatures.prescriptionValidation' | translate }}</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="col-md-4 mb-4">
          <div class="card h-100 border-0 shadow-lg hover-card">
            <div class="card-body text-center p-4">
              <div class="icon-circle bg-info mb-4">
                <i class="fas fa-user fa-2x text-white"></i>
              </div>
              <h5 class="card-title fw-bold">{{ 'about.forPatients' | translate }}</h5>
              <p class="card-text mb-4">{{ 'about.patientsDescription' | translate }}</p>              <ul class="list-unstyled text-start">
                <li><i class="bi bi-check-circle-fill text-info me-2"></i>{{ 'about.patientFeatures.prescriptionAccess' | translate }}</li>
                <li><i class="bi bi-check-circle-fill text-info me-2"></i>{{ 'about.patientFeatures.medicalHistory' | translate }}</li>
                <li><i class="bi bi-check-circle-fill text-info me-2"></i>{{ 'about.patientFeatures.treatmentTracking' | translate }}</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="col-md-6 mb-4">
          <div class="card h-100 border-0 shadow-lg hover-card">
            <div class="card-body text-center p-4">
              <div class="icon-circle bg-danger mb-4">
                <i class="fas fa-flask fa-2x text-white"></i>
              </div>
              <h5 class="card-title fw-bold">{{ 'about.forLabs' | translate }}</h5>
              <p class="card-text mb-4">{{ 'about.labsDescription' | translate }}</p>
              <ul class="list-unstyled text-start">
                <li><i class="bi bi-check-circle-fill text-danger me-2"></i>{{ 'about.labFeatures.testManagement' | translate }}</li>
                <li><i class="bi bi-check-circle-fill text-danger me-2"></i>{{ 'about.labFeatures.analysisTracking' | translate }}</li>
                <li><i class="bi bi-check-circle-fill text-danger me-2"></i>{{ 'about.labFeatures.patientTestHistory' | translate }}</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="col-md-6 mb-4">
          <div class="card h-100 border-0 shadow-lg hover-card">
            <div class="card-body text-center p-4">
              <div class="icon-circle bg-secondary mb-4">
                <i class="fas fa-hospital fa-2x text-white"></i>
              </div>
              <h5 class="card-title fw-bold">{{ 'about.forHospitals' | translate }}</h5>
              <p class="card-text mb-4">{{ 'about.hospitalsDescription' | translate }}</p>
              <ul class="list-unstyled text-start">
                <li><i class="bi bi-check-circle-fill text-secondary me-2"></i>{{ 'about.hospitalFeatures.serviceCoordination' | translate }}</li>
                <li><i class="bi bi-check-circle-fill text-secondary me-2"></i>{{ 'about.hospitalFeatures.patientRecords' | translate }}</li>
                <li><i class="bi bi-check-circle-fill text-secondary me-2"></i>{{ 'about.hospitalFeatures.medicalAdmin' | translate }}</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<div class="container my-5" id="gemini-assistant-section">
  <div class="ai-assistant">
    <div class="d-flex align-items-center mb-4">
      <img src="assets/logo3 - Copie.png" alt="Labess AI" class="me-3" style="width: 40px; height: 40px;">
      <div>
        <h4 class="mb-0">{{ 'ai.assistant.title' | translate }}</h4>
        <small class="text-muted">{{ 'ai.assistant.poweredBy' | translate }}</small>
      </div>
    </div>

    <p class="text-secondary mb-4">
      {{ 'ai.assistant.description' | translate }}
    </p>

    <div class="chat-container mb-4">
      <div class="message-input-container">
        <textarea class="form-control"
                id="geminiPrompt"
                rows="3"
                [(ngModel)]="userPrompt"
                placeholder="{{ 'ai.assistant.questionPlaceholder' | translate }}"
                [disabled]="isLoading"
                aria-describedby="promptHelp">
        </textarea>
        <small id="promptHelp" class="form-text">{{ 'ai.assistant.promptHelp' | translate }}</small>

        <div class="d-flex align-items-center mt-3">
          <button class="btn btn-labess btn-lg me-3"
                  (click)="askGemini()"
                  [disabled]="isLoading || !userPrompt || userPrompt.trim().length === 0">
            <span *ngIf="!isLoading">
              <i class="bi bi-send-fill me-2"></i>
              {{ 'ai.assistant.sendButton' | translate }}
            </span>
            <span *ngIf="isLoading" class="d-flex align-items-center">
              <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
              {{ 'ai.assistant.analyzing' | translate }}
            </span>
          </button>
        </div>
      </div>

      <div *ngIf="errorMessage" class="user-message error-message mt-4">
        <i class="bi bi-exclamation-circle-fill me-2"></i>
        <span>{{ errorMessage }}</span>
      </div>

      <div *ngIf="geminiResponse && !isLoading" class="ai-message mt-4">
        <div class="d-flex align-items-center mb-2">
          <img src="assets/logo3.png" alt="Labess AI" class="me-2" style="width: 24px; height: 24px;">
          <span class="fw-bold">{{ 'ai.assistant.responseTitle' | translate }}</span>
        </div>
        <p style="white-space: pre-wrap; margin-bottom: 0; font-size: 1.05rem;">{{ geminiResponse }}</p>
      </div>
    </div>
  </div>
</div>

    
<footer class="footer mt-auto py-4 bg-dark text-white">
  <div class="container">
    <div class="row">
      <div class="col-md-4">
        <h5>Labess</h5>
        <p class="small">{{ 'about.description'  }}</p>
      </div>
      <div class="col-md-4">
        <h5>{{ 'common.quickLinks'  }}</h5>
        <ul class="list-unstyled">
          <li><a routerLink="/login" class="text-white text-decoration-none">{{ 'common.login'  }}</a></li>
          <li><a routerLink="/preinscription" class="text-white text-decoration-none">{{ 'common.register'  }}</a></li>
          </ul>
      </div>
      <div class="col-md-4">
        <h5>{{ 'common.contact'  }}</h5>
        <p class="small">
          <i class="bi bi-envelope me-2"></i>contact&#64;labess.tn<br>
          <i class="bi bi-telephone me-2"></i>+216 XX XXX XXX
        </p>
      </div>
    </div>
    <hr>
    <div class="text-center">
      <p class="small mb-0">&copy; {{currentYear}} Labess. {{ 'common.allRightsReserved'  }}</p>
    </div>
  </div>
</footer>